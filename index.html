<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Freedom–Equality–Security Survey</title>
  <style>
    body { font-family:sans-serif; max-width:700px; margin:20px auto; }
    input[type=range]{width:100%;}
    button{padding:8px 16px; margin-top:12px;}
  </style>
</head>
<body>
<h1>Values Survey</h1>
<p>Distribute 100 points among <b>Freedom</b>, <b>Equality</b>, and <b>Security</b> for each time period.</p>

<select id="timepoint">
  <option value="today">Today</option>
  <option value="2075">Year 2075</option>
</select>

<label>Freedom: <span id="fVal">33</span></label>
<input type="range" id="f" min="0" max="100" value="33">
<label>Equality: <span id="eVal">33</span></label>
<input type="range" id="e" min="0" max="100" value="33">
<label>Security: <span id="sVal">34</span></label>
<input type="range" id="s" min="0" max="100" value="34">
<button id="submit">Submit</button>
<p id="msg"></p>

<script>
const url = "https://script.google.com/macros/s/AKfycbxOWFxFz8T-srTnTK6bjDw3lEIIMla323dFIsjn7YhBQONWBVuw1JCi4PW9PSED07ik/exec";
function update(){
  const f=+fEl.value,e=+eEl.value,s=+sEl.value,t=f+e+s||1;
  fVal.textContent=Math.round(100*f/t);
  eVal.textContent=Math.round(100*e/t);
  sVal.textContent=100-(Math.round(100*f/t)+Math.round(100*e/t));
}
const fEl=f,eEl=e,sEl=s;
[fEl,eEl,sEl].forEach(x=>x.oninput=update); update();

submit.onclick=async ()=>{
  const tp=timepoint.value;
  const f=+fEl.value,e=+eEl.value,s=+sEl.value,t=f+e+s||1;
  const body=JSON.stringify({timepoint:tp,freedom:f/t,equality:e/t,security:s/t});
  const r=await fetch(url,{method:"POST",body});
  msg.textContent=r.ok?"Thank you! Response recorded.":"Error submitting.";
};
</script>
</body>
</html>
